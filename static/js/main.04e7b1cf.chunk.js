(this["webpackJsonpmany-city-weather"]=this["webpackJsonpmany-city-weather"]||[]).push([[0],{31:function(e,t,a){},47:function(e,t,a){e.exports=a(77)},77:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(10),l=a.n(r),o=(a(31),a(17)),i=a(12),s=a(30),u=a(97),m=a(95),d=function(e){var t=e.clickHandler;return c.a.createElement("div",{className:"add-button"},c.a.createElement(u.a,{variant:"contained",color:"primary",startIcon:c.a.createElement(m.a,null,"add_circle"),onClick:t}," Add\xa0Location "))},f=a(42),h=a.n(f),E=function(e){var t=e.suggestionSelect,a=e.searchFieldRef;return c.a.createElement(h.a,{publicKey:"pk.eyJ1IjoiZnJlZXJhbmdlYW5keSIsImEiOiJja2J0bXoxMnAwYmpnMnlxdmYyOTVqNXA0In0.1u16EPjQEgr4LwHinZZKjA",onSuggestionSelect:t,inputClass:"city-input",ref:a})},p=function(e){var t=e.suggestionSelect,a=e.addCityDisplay,n=e.searchFieldRef;return c.a.createElement("div",{className:"add-city"},c.a.createElement(E,{suggestionSelect:t,searchFieldRef:n}),c.a.createElement(d,{clickHandler:a}))},w=a(98),v=a(100),b=a(96),g=a(99),y=function(e){return e>=21||e<6},O=function(e){return function(t){var a=9*(t.temp-273.14)/5+32,n=1e3*t.dt,c=new Date(n),r=c.getMonth()+1,l=c.getDate(),o="".concat(r,"/").concat(l),s=c.getHours(),u=60*c.getTimezoneOffset(),m=j(n,u+e);return Object(i.a)(Object(i.a)({date:o,hour:s},m),{},{temp:a,main:t.weather[0].main,description:t.weather[0].description,icon:t.weather[0].icon,cloudCover:t.clouds,windSpeed:t.wind_speed})}},j=function(e,t){var a=new Date(e+1e3*t),n=a.getMonth()+1,c=a.getDate();return{localDate:"".concat(n,"/").concat(c),localHour:a.getHours()}},H=function(e){var t,a,n=e.weatherInfo,r=e.showLocal,l=r?n.localDate:n.date,o=r?n.localHour:n.hour,i=(t=o,a=n.icon,y(t)?a.replace("d","n"):a.replace("n","d")),s="http://openweathermap.org/img/wn/".concat(i,"@2x.png"),u=function(e){return y(e)?"night-bg":"day-bg"}(o),m=r?"local-time":"";return c.a.createElement("div",{className:"weather-info-tile"},c.a.createElement("div",{className:m},c.a.createElement("h3",null,l),c.a.createElement("h2",null,function(e){return 0===e?"12am":e>12?"".concat(e-12,"pm"):"".concat(e,"am")}(o))),c.a.createElement("div",{className:"weather-card ".concat(u)},c.a.createElement("h2",null,n.temp.toFixed(0)," \xb0F"),c.a.createElement(g.a,{className:"weather-icon",src:s}),c.a.createElement("h3",null,n.description)))},L=a(28),N=a(26),k=function(e){var t=e.showLocal?"local-time":"",a=e.showLocal?"":"hidden";return c.a.createElement("div",{className:"city-header"},c.a.createElement("div",{onClick:e.showOffsetHandler},c.a.createElement(L.a,{className:"icon-button ".concat(t),icon:N.a}),c.a.createElement("span",{className:"local-time-label ".concat(a)},"LOCAL")),c.a.createElement("div",{className:"city-name"},c.a.createElement("h1",null,e.name)),c.a.createElement("div",{onClick:e.deleteHandler},c.a.createElement(L.a,{className:"icon-button",icon:N.b})))},S=function(e){var t=e.name,a=e.forecasts,n=e.showLocal,r=e.deleteHandler,l=e.showOffsetHandler,o=a.slice(0,6).map((function(e,t){return c.a.createElement(b.a,{item:!0,xs:2,key:t},c.a.createElement(H,{weatherInfo:e,showLocal:n}))}));return c.a.createElement("li",{className:"city-weather"},c.a.createElement(k,{name:t,showLocal:n,deleteHandler:r,showOffsetHandler:l}),c.a.createElement(b.a,{container:!0,spacing:1},o))},x=function(e){var t=e.cityList,a=e.deleteHandler,n=e.showOffsetHandler,r=t.map((function(e,t){var r=e.name,l=e.showLocal,o=e.forecasts;return c.a.createElement(w.a,{key:t,classNames:"city-weather",timeout:{enter:250,exit:250}},c.a.createElement(S,{name:r,forecasts:o,showLocal:l,deleteHandler:a(t),showOffsetHandler:n(t)}))}));return c.a.createElement("div",{className:"city-display"},c.a.createElement("ul",null,c.a.createElement(v.a,null,r)))},C=function(e){var t=Object(n.useState)(null),a=Object(s.a)(t,2),r=a[0],l=a[1],u=Object(n.useState)([]),m=Object(s.a)(u,2),d=m[0],f=m[1],h=Object(n.useRef)(null),E=function(e){var t="lat=".concat(e.coords[0],"&lon=").concat(e.coords[1]);fetch("".concat("https://api.openweathermap.org/data/2.5/","onecall?").concat(t).concat("&exclude=current,minutely,daily","&appid=").concat("85605c622914f5dad8bccbb102c2769c")).then((function(e){if(e.ok)return e;var t="".concat(e.status," (").concat(e.statusText,")");throw new Error(t)})).then((function(e){return e.json()})).then((function(t){var a,n,c=(a=t.hourly,n=t.timezone_offset,a.map(O(n))),r=Object(i.a)(Object(i.a)({},e),{},{showLocal:!1,forecasts:c}),l=[].concat(Object(o.a)(d),[r]);f(l)})).catch((function(e){return console.error("Error in fetch: ".concat(e.message))}))};return c.a.createElement(c.a.Fragment,null,c.a.createElement("h1",{className:"page-title"},"How's the weather over there?"),c.a.createElement(p,{suggestionSelect:function(e,t,a,n){l({name:e,coords:[t,a],forecasts:null})},addCityDisplay:function(){null!==r&&(E(r),l(null),h.current.state.query="")},searchFieldRef:h}),c.a.createElement(x,{cityList:d,deleteHandler:function(e){return function(){var t=[].concat(Object(o.a)(d.slice(0,e)),Object(o.a)(d.slice(e+1)));f(t)}},showOffsetHandler:function(e){return function(){var t=d[e],a=!t.showLocal,n=Object(i.a)(Object(i.a)({},t),{},{showLocal:a}),c=[].concat(Object(o.a)(d.slice(0,e)),[n],Object(o.a)(d.slice(e+1)));f(c)}}}))};var D=function(){return c.a.createElement("div",{className:"App"},c.a.createElement(C,null))};l.a.render(c.a.createElement(D,null),document.getElementById("root"))}},[[47,1,2]]]);
//# sourceMappingURL=main.04e7b1cf.chunk.js.map